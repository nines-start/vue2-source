{"version":3,"file":"vue.js","sources":["../src/shared/util.js","../src/util/next-tick.js","../src/shared/constants.js","../src/util/options.js","../src/global-api/mixin.js","../src/global-api/index.js","../src/compiler/parse/text-parse.js","../src/compiler/codeGen/index.js","../src/compiler/parse/html-parse.js","../src/compiler/index.js","../src/observer/dep.js","../src/observer/scheduler.js","../src/observer/traverse.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/instance/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/instance/state.js","../src/instance/init.js","../src/vdom/index.js","../src/index.js"],"sourcesContent":["export function isFunction(value) {\r\n    return typeof value === \"function\";\r\n}\r\n\r\nconst _toString = Object.prototype.toString;\r\nexport function isPlainObject(obj) {\r\n    return _toString.call(obj) === \"[object Object]\";\r\n}\r\n\r\nexport function isObject(obj) {\r\n    return obj !== null && typeof obj === \"object\";\r\n}\r\n\r\nexport function hasOwn(obj, key) {\r\n    return hasOwnProperty.call(obj, key);\r\n}  \r\n\r\nexport const isArray = Array.isArray;\r\n\r\nexport function isNative(Ctor) {\r\n    return typeof Ctor === \"function\" && /native code/.test(Ctor.toString());\r\n}\r\n\r\nexport function parsePath(path) {\r\n    // 'obj.a.b.c'\r\n    const segments = path.split(\".\");\r\n    return function (obj) {\r\n        for (let i = 0; i < segments.length; i++) {\r\n            if (!obj) return;\r\n            // 取值之后再把值赋回去\r\n            obj = obj[segments[i]];\r\n        }\r\n        return obj;\r\n    };\r\n}\r\n\r\nexport function noop(a, b, c) {}\r\n\r\nexport function isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\n\r\nexport function isDef(v) {\r\n    return v !== undefined && v !== null;\r\n}\r\n","import { isNative } from \"../shared/util\";\r\n\r\nlet callbacks = [];\r\n\r\nlet pending = false;\r\n\r\n// nextTick中没有直接使用某个api，而是采用优雅降级的方式\r\n// 内部先采用Promise，如果不兼容就采用MutationObserver()，然后是seImmediate（ie专用），最后是setTimeout\r\n// 这些api是在浏览器中执行的，node不支持\r\nlet timerFunc;\r\n\r\nif (typeof Promise !== \"undefined\" && isNative(Promise)) {\r\n    const p = Promise.resolve();\r\n    timerFunc = () => {\r\n        p.then(flushCallbacks);\r\n    };\r\n} else if (\r\n    typeof MutationObserver !== \"undefined\" &&\r\n    (isNative(MutationObserver) ||\r\n        MutationObserver.toString() === \"[object MutationObserverConstructor]\")\r\n) {\r\n    let counter = 1;\r\n    const observer = new MutationObserver(flushCallbacks);\r\n    const textNode = document.createTextNode(String(counter));\r\n    // 监控文本的数据，并监控文本节点中字符的变化\r\n    observer.observe(textNode, {\r\n        characterData: true,\r\n    });\r\n    timerFunc = () => {\r\n        counter = (counter + 1) % 2;\r\n        textNode.data = String(counter);\r\n    };\r\n} else if (typeof setImmediate !== \"undefined\" && isNative(setImmediate)) {\r\n    timerFunc = () => {\r\n        setImmediate(flushCallbacks);\r\n    };\r\n} else {\r\n    // Fallback to setTimeout.\r\n    timerFunc = () => {\r\n        setTimeout(flushCallbacks, 0);\r\n    };\r\n}\r\n\r\nfunction flushCallbacks() {\r\n    pending = false;\r\n    const copies = callbacks.slice(0);\r\n    callbacks.length = 0; // 清空callback\r\n    for (let i = 0; i < copies.length; i++) {\r\n        copies[i]();\r\n    }\r\n}       \r\n\r\n// nextTick不是创建了异步任务，而是将这个任务维护到队列中\r\n\r\nexport function nextTick(cb, ctx) {\r\n    callbacks.push(cb);\r\n    if (!pending) {\r\n        pending = true;\r\n        timerFunc();\r\n    }\r\n}\r\n","export const LIFECYCLE_HOOKS = [\r\n    \"beforeCreate\",\r\n    \"created\",\r\n    \"beforeMount\",\r\n    \"mounted\",\r\n    \"beforeUpdate\",\r\n    \"updated\",\r\n    \"beforeDestroy\",\r\n    \"destroyed\",\r\n    \"activated\",\r\n    \"deactivated\",\r\n    \"errorCaptured\",\r\n    \"serverPrefetch\",\r\n    \"renderTracked\",\r\n    \"renderTriggered\",\r\n];\r\n","import { hasOwn, isArray } from \"../shared/util\";\r\n\r\nimport { LIFECYCLE_HOOKS } from \"../shared/constants\";\r\n\r\n// 使用策略模式简化ifelse\r\n// 不同的钩子使用相同的策略\r\n// 相当于if()else if() else(){}...的形式\r\n\r\n// 定义一个策略对象\r\nconst strats = Object.create(null);\r\n\r\nLIFECYCLE_HOOKS.forEach((hook) => {\r\n    strats[hook] = mergeLifecycleHook;\r\n});\r\n\r\nconst defaultStrat = function (parentVal, childVal) {\r\n    return childVal === undefined ? parentVal : childVal;\r\n};\r\n// 生命周期的合并\r\nexport function mergeLifecycleHook(parentVal, childVal) {\r\n    // 最终合并的是一个数组\r\n    const res = childVal\r\n        ? parentVal\r\n            ? parentVal.concat(childVal)\r\n            : isArray(childVal)\r\n            ? childVal\r\n            : [childVal]\r\n        : parentVal;\r\n    return res ? dedupeHooks(res) : res;\r\n}\r\n\r\nfunction dedupeHooks(hooks) {\r\n    const res = [];\r\n    for (let i = 0; i < hooks.length; i++) {\r\n        if (res.indexOf(hooks[i]) === -1) {\r\n            res.push(hooks[i]);\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n    const options = {}; \r\n    \r\n    for (const key in parent) {\r\n        mergeField(key);\r\n    }\r\n    for (const key in child) {\r\n        if (!hasOwn(parent, key)) {\r\n            mergeField(key);\r\n        }\r\n    }\r\n\r\n    // 合并字段\r\n    function mergeField(key) {\r\n        const strat = strats[key] || defaultStrat;\r\n        options[key] = strat(parent[key], child[key]);\r\n    }       \r\n    return options;\r\n}","import { mergeOptions } from \"../util/options\";\r\nexport function initMixin(Vue) {\r\n    // 全局定义的属性和方法都放在了vm.$options上面，所以要进行options合并\r\n    Vue.mixin = function (mixin) {\r\n        this.options = mergeOptions(this.options, mixin);\r\n        return this;\r\n    };\r\n}\r\n","import { nextTick } from \"../util/next-tick\";\r\nimport { initMixin } from \"./mixin\";\r\n\r\n// 全局公共方法\r\nexport function initGlobalAPI(Vue) {\r\n    Vue.options = Object.create(null);\r\n    initMixin(Vue);\r\n    Vue.nextTick = nextTick;\r\n}\r\n\r\n","// 匹配{{}}\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\n// 匹配文本标签\r\nexport function parseText(text) {\r\n    if (!defaultTagRE.test(text)) {\r\n        // 如果是普通文本，不带双括号的文本\r\n        return `_v(${JSON.stringify(text)})`;\r\n    }\r\n\r\n    let tokens = [];\r\n\r\n    // 如果正则匹配是全局模式，需要每次置为 0\r\n\r\n    let lastIndex = (defaultTagRE.lastIndex = 0);\r\n    // 匹配到的结果\r\n    let match;\r\n    // 保存匹配到的索引\r\n    let index;\r\n    while ((match = defaultTagRE.exec(text))) {\r\n        index = match.index;\r\n        if (index > lastIndex) {\r\n            // 说明是文本\r\n            tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`);\r\n        // 当前索引加上匹配字符串的长度\r\n        lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return tokens.join(\"+\");\r\n}","import { parseText } from \"../parse/text-parse\";\r\n\r\n// 处理属性\r\nfunction genProps(ast) {\r\n    const { attrs } = ast;\r\n\r\n    let str = \"\";\r\n    // 遍历attrs\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        const at = attrs[i];\r\n        // style属性需要单独处理\r\n        // 样式  style=\"background-color: red\" 需要把冒号转成对象\r\n        if (at.name === \"style\") {\r\n            let obj = {};\r\n            // 先用分号分隔，再用冒号分隔\r\n            at.value.split(\";\").forEach((item) => {\r\n                let [key, value] = item.split(\":\");\r\n                obj[key] = value;\r\n            });\r\n            at.value = obj;\r\n        }\r\n        // 其他情况可以直接拼接\r\n        // 多个属性之间需要使用逗号\r\n        str += `${at.name}:${JSON.stringify(at.value)},`;\r\n    }\r\n    // 删除最后一个，\r\n    return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren(ast) {\r\n    // 判断是否有子元素\r\n    const { children } = ast;\r\n    // 需要把子元素拼接在一起，用逗号拼接起来\r\n    if (children) {\r\n        return children.map((child) => genNode(child)).join(\",\");\r\n    }\r\n}\r\nfunction genNode(node) {\r\n    // 节点可能有两种类型，一种是文本，一种是标签\r\n    if (node.type === 1) {\r\n        return genElement(node);\r\n    } else {\r\n        let { text } = node;\r\n        return `_v(${parseText(text)})`;\r\n    }\r\n}\r\n\r\n// 这部分的核心是字符串拼接，处理成想要的形式\r\nfunction genElement(ast) {\r\n    let props = genProps(ast);\r\n    let children = genChildren(ast);\r\n    // 首先解析出根元素\r\n    // 如果attrs存在，就解析attrs，否则是一个null字符串\r\n    let code = `_c('${ast.tag}',\r\n    ${ast.attrs.length > 0 ? `${props}` : \"null\"}${\r\n        children ? `,${children}` : \"\"\r\n    })`;\r\n    return code;\r\n}\r\n\r\nexport function generate(ast) {\r\n    const code = ast ? genElement(ast) : '_c(\"div\")';\r\n    // 使用with的作用，去this上取值\r\n    return {\r\n        render: `with(this){return ${code}}`,\r\n    };\r\n}\r\n","// 匹配属性\r\nconst attribute =\r\n    /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n\r\nconst dynamicArgAttribute =\r\n    /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n\r\n// 匹配标签名\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\n\r\n// ?:匹配不捕获，捕获xx:yy这种类型的标签\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\n\r\n// 标签开头\r\n// `<` 开头 +（ `a-z`或`A-Z`或`_`）+（`-`或`.`或`0-9`或`_`或`a-z`或`A-Z`）+ （`:`可选） +（ `a-z`或`A-Z`或`_`）+（`-`或`.`或`0-9`或`_`或`a-z`或`A-Z`）\r\n// 所以标签可能有两种情况，一种是`<div`，另一种是`<div:xxx`,带有命名空间的形式。\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\n\r\n// 匹配标签结束\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\n// 结尾标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\n\r\nexport function parseHTML(html) {\r\n    // 树根\r\n    let root;\r\n\r\n    // 当前的父标签，永远指向栈中最后一个\r\n    let currentParent;\r\n\r\n    // 栈结构\r\n    let stack = [];\r\n\r\n    const ELEMENT_TYPE = 1;\r\n    const TEXT_TYPE = 3;\r\n\r\n    // 只要html不为空，就一直循环解析\r\n    while (html) {\r\n        let textEnd = html.indexOf(\"<\");\r\n        // 等于0 ，是标签\r\n        if (textEnd === 0) {\r\n\r\n            const startTagMatch = parseStartTag();\r\n            // 开始标签\r\n            if (startTagMatch) {\r\n                handleStartTag(startTagMatch);\r\n                continue;\r\n            }\r\n            // 结束标签\r\n            const endTagMatch = html.match(endTag);\r\n            if (endTagMatch) {\r\n                handleEndTag(endTagMatch[1]);\r\n                advance(endTagMatch[0].length);\r\n            }\r\n        }\r\n\r\n        // 是文本\r\n        let text;\r\n        if (textEnd > 0) {\r\n            text = html.substring(0, textEnd);\r\n        }\r\n        if (text) {\r\n            charts(text);\r\n            advance(text.length);\r\n        }\r\n    }\r\n\r\n    // 截取的方法 step是截取的位置,substring不传结束索引end，会一直截取到末尾\r\n    // 将字符串进行截取操作，然后替换html\r\n    function advance(n) {\r\n        html = html.substring(n);\r\n    }\r\n\r\n    // 匹配开始标签\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);\r\n        if (start) {\r\n            // 匹配到后将标签名和属性拿出来，放到一个对象里面\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: [],\r\n            };\r\n            // 获取标签后删除\r\n            advance(start[0].length);\r\n            // 如果没有遇到闭合标签，说明没有属性\r\n            // 而且还要能匹配到属性\r\n            let end, attr;\r\n\r\n            // 不是开始标签的结束，并且是属性就一直匹配\r\n            while (\r\n                !(end = html.match(startTagClose)) &&\r\n                (attr = html.match(attribute))\r\n            ) {\r\n                // 使用双引号，属性值是第3项，使用单引号，是第四项不用引号是是第五项\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5],\r\n                });\r\n                // 获取属性后删除\r\n                advance(attr[0].length);\r\n            }\r\n            if (end) {\r\n                advance(end[0].length);\r\n                return match;\r\n            }\r\n        }\r\n    }\r\n    // 创建ast语法树\r\n    function createASTElement(tagName, attrs) {\r\n        return {\r\n            // 标签名\r\n            tag: tagName,\r\n            // 标签type是1\r\n            type: ELEMENT_TYPE,\r\n            // 子节点\r\n            children: [],\r\n            // 属性\r\n            attrs,\r\n            // 父节点\r\n            parent: null,\r\n        };\r\n    }\r\n\r\n    // 处理开始标签\r\n    function handleStartTag(match) {\r\n        // 匹配元素出栈后，此时栈中最后一个元素是出栈元素的父亲。\r\n\r\n        const { tagName, attrs } = match;\r\n        const element = createASTElement(tagName, attrs);\r\n\r\n        // 第一次调用的是树根\r\n        if (!root) {\r\n            root = element;\r\n        }\r\n        // 当前解析的标签保存为父标签\r\n        currentParent = element;\r\n\r\n        // 将开始标签元素放入栈中\r\n        stack.push(element);\r\n    }\r\n\r\n    // 处理结束标签，在结尾标签闭合时，可以创建父子关系\r\n    function handleEndTag(tagName) {\r\n        // 取出栈中最后一个标签\r\n        const element = stack.pop();\r\n        // 当前父元素也要变成前一个元素\r\n        currentParent = stack[stack.length - 1];\r\n\r\n        // 元素闭合时，可以知道这个标签的父亲是谁\r\n        // 同时也知道这个父亲的子元素\r\n        if (currentParent) {\r\n            element.parent = currentParent;\r\n            currentParent.children.push(element);\r\n        }\r\n    }\r\n\r\n    function charts(text) {\r\n        text = text.trim();\r\n        // 如果有文本，就将文本放入当前的父标签\r\n        if (text) {\r\n            currentParent.children.push({\r\n                // 文本类型是3\r\n                type: TEXT_TYPE,\r\n                text,\r\n            });\r\n        }\r\n    }\r\n\r\n    return root;\r\n}\r\n","import { generate } from \"./codeGen\";\r\nimport { parseHTML } from \"./parse/html-parse\";\r\n\r\nexport function compilerToFunctions(template) {\r\n    // 将html代码转成语法树\r\n    const ast = parseHTML(template);\r\n\r\n    // 通过ast,生成新的代码\r\n    const code = generate(ast);\r\n\r\n    // 生成render函数\r\n    let render = new Function(code.render);\r\n    return render;\r\n}\r\n","let uid = 0;\r\n\r\nclass Dep {\r\n    constructor() {\r\n        this.id = uid++;\r\n        // 存放当前属性对应的watcher\r\n        this.subs = [];\r\n    }\r\n    addSub(sub) {\r\n        this.subs.push(sub);\r\n    }\r\n    depend() {\r\n        Dep.target.addDep(this);\r\n    }\r\n    notify() {\r\n        this.subs.forEach((watcher) => watcher.update());\r\n    }\r\n}\r\n\r\n// 添加一个全局变量,，保存当前的watcher\r\nDep.target = null;\r\n\r\nconst targetStack = [];\r\n\r\n// 单线程思想\r\nexport function pushTarget(target = null) {\r\n    targetStack.push(target);\r\n    Dep.target = target;\r\n}\r\n\r\nexport function popTarget() {\r\n    targetStack.pop();\r\n    Dep.target = targetStack[targetStack.length - 1];\r\n}\r\n\r\nexport default Dep;\r\n","import { nextTick } from \"../util/next-tick\";\r\n\r\nlet has = {};\r\nlet queue = [];\r\nlet pending = false;\r\n\r\nfunction flushSchedulerQueue() {\r\n    // 把每一个任务进行执行\r\n    let flushQueue = queue.slice(0);\r\n    // 执行后清空\r\n    // 刷新的过程中，还有新的watcher，watcher可以继续放入queue中\r\n    queue = [];\r\n    has = {};\r\n    pending = false;\r\n    flushQueue.forEach((q) => q.run());\r\n}\r\n\r\nexport function queueWatcher(watcher) {\r\n    const id = watcher.id;\r\n    if (has[id] != null) {\r\n        return;\r\n    }\r\n    // 标识\r\n    has[id] = true;\r\n\r\n    // 无论watcher的update执行多少次，queueWatcher只执行一次\r\n\r\n    queue.push(watcher);\r\n\r\n    if (!pending) {\r\n        // 把多次的执行合并成一次\r\n        nextTick(flushSchedulerQueue);\r\n        pending = true;\r\n    }\r\n}\r\n","import { isArray } from \"../shared/util\";\r\n\r\nconst seenObjects = new Set();\r\n\r\nexport function traverse(val) {\r\n    _traverse(val, seenObjects);\r\n    seenObjects.clear();\r\n    return val;\r\n}\r\nfunction _traverse(val, seen) {\r\n    let i, keys;\r\n    const isA = isArray(val);\r\n\r\n    if (val.__ob__) {\r\n        const depId = val.__ob__.dep.id;\r\n        if (seen.has(depId)) {\r\n            return;\r\n        }\r\n        seen.add(depId);\r\n    }\r\n    if (isA) {\r\n        i = val.length;\r\n        while (i--) _traverse(val[i], seen);\r\n    } else {\r\n        keys = Object.keys(val);\r\n        i = keys.length;\r\n        while (i--) _traverse(val[keys[i]], seen);\r\n    }\r\n}\r\n","import { isFunction, isObject, parsePath } from \"../shared/util\";\r\nimport Dep, { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./scheduler\";\r\nimport { traverse } from \"./traverse\";\r\n\r\n// 每个watcher都添加一个唯一值\r\nlet uid = 0;\r\n\r\nclass Watcher {\r\n    constructor(vm, expOrFn, cb, options, isRenderWatcher) {\r\n        if ((this.vm = vm) && isRenderWatcher) {\r\n            vm._watcher = this;\r\n        }\r\n\r\n        if (options) {\r\n            this.deep = !!options.deep;\r\n            this.user = !!options.user;\r\n            this.lazy = !!options.lazy;\r\n        } else {\r\n            this.deep = this.user = this.lazy = false;\r\n        }\r\n\r\n        this.id = ++uid;\r\n        this.vm = vm;\r\n        this.cb = cb;\r\n        this.dirty = this.lazy; // for lazy watchers\r\n\r\n        this.deps = [];\r\n        this.depIds = new Set();\r\n\r\n        if (isFunction(expOrFn)) {\r\n            // 调用getter意味着会发生取值操作\r\n            this.getter = expOrFn;\r\n        } else {\r\n            this.getter = parsePath(expOrFn);\r\n        }\r\n        // this.newDeps = [];\r\n        // this.newDepIds = new Set();\r\n\r\n        // 默认会调用一次get方法，进行取值，将结果保存起来\r\n        this.value = this.lazy ? undefined : this.get();\r\n    }\r\n\r\n    get() {\r\n        const vm = this.vm;\r\n        // 将当前的watcher放到全局变量上\r\n        // this是当前watcher实例\r\n        pushTarget(this);\r\n        // 首先调用一次，让页面渲染,此时会取值,调用defineProperty 的get方法里,\r\n        const value = this.getter.call(vm, vm);\r\n        if (this.deep) {\r\n            traverse(value);\r\n        }\r\n\r\n        // 视图渲染完成后，清空这个值\r\n        popTarget();\r\n\r\n        return value;\r\n    }\r\n    // 让watcher记住dep\r\n    addDep(dep) {\r\n        const id = dep.id;\r\n        // 去重\r\n        // 多次重复取值，watcher就会多次保存dep，所以要去重\r\n        if (!this.depIds.has(id)) {\r\n            this.deps.push(dep);\r\n            this.depIds.add(id);\r\n            dep.addSub(this);\r\n        }\r\n    }\r\n    update() {\r\n        // 把当前的watcher都保存起来，不立即更新\r\n        // 依赖的值发生变化，就将dirty的值改为true，开启更新\r\n        if (this.lazy) {\r\n            this.dirty = true;\r\n        } else {\r\n            queueWatcher(this);\r\n        }\r\n    }\r\n\r\n    run() {\r\n        const vm = this.vm;\r\n        // 新值\r\n        const value = this.get();\r\n        if (value !== this.value || isObject(value) || this.deep) {\r\n            // set new value\r\n            const oldValue = this.value;\r\n            this.value = value;\r\n            // 是用户的watcher\r\n            if (this.user) {\r\n                this.cb.call(vm, value, oldValue);\r\n            }\r\n        }\r\n    }\r\n    evaluate() {\r\n        // 执行完成后的结果也要保存下来\r\n        // 此时调用的get方法，内部的getter相当于是用户传入的函数\r\n        this.value = this.get();\r\n        // 修改标识\r\n        this.dirty = false; \r\n    }\r\n    depend() {\r\n        let i = this.deps.length;\r\n        while (i--) {\r\n            this.deps[i].depend();\r\n        }\r\n    }\r\n}\r\n\r\nexport default Watcher;\r\n","import { isDef, isUndef } from \"../shared/util\";\r\nexport function patch(oldVnode, vnode) {\r\n    if (isUndef(oldVnode)) {\r\n        createElm(vnode);\r\n    } else {\r\n        const isRealElement = isDef(oldVnode.nodeType);\r\n        if (isRealElement) {\r\n            const el = oldVnode;\r\n            const parent = el.parentNode;\r\n            let newEle = createElm(vnode);\r\n            parent.insertBefore(newEle, el.nextSibling);\r\n            parent.removeChild(el);\r\n            return newEle;\r\n        } else {\r\n            // 执行diff算法更新\r\n            patchVnode(oldVnode, vnode);\r\n        }\r\n    }\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    let { tag, data, children, text } = vnode;\r\n    if (typeof tag === \"string\") {\r\n        // 标签\r\n        vnode.el = document.createElement(tag);\r\n\r\n        patchProps(vnode.el, {}, data);\r\n        children.forEach((element) => {\r\n            // 将子元素也处理成真实节点\r\n            vnode.el.appendChild(createElm(element));\r\n        });\r\n    } else {\r\n        // 文本\r\n        vnode.el = document.createTextNode(text);\r\n    }\r\n\r\n    return vnode.el;\r\n}\r\nfunction patchProps(el, oldProps = {}, props = {}) {\r\n    let oldStyle = oldProps.style || {};\r\n    let newStyle = props.style || {};\r\n\r\n    for (const key in oldStyle) {\r\n        if (!Object.hasOwnProperty.call(newStyle, key)) {\r\n            el.style[key] = \"\";\r\n        }\r\n    }\r\n\r\n    for (const key in oldProps) {\r\n        if (!Object.hasOwnProperty.call(props, key)) {\r\n            el.removeAttribute(key);\r\n        }\r\n    }\r\n    for (const key in props) {\r\n        if (key === \"style\") {\r\n            for (let styleName in props.style) {\r\n                el.style[styleName] = props.style[styleName];\r\n            }\r\n        } else if (key === \"class\") {\r\n            el.className = props.class;\r\n        } else {\r\n            el.setAttribute(key, props[key]);\r\n        }\r\n    }\r\n}\r\n\r\nfunction patchVnode(oldVnode, vnode) {\r\n    if (oldVnode === vnode) {\r\n        return;\r\n    }\r\n    // 如果元素不相同，直接替换\r\n    let el = createElm(vnode);\r\n    if (!sameVnode(oldVnode, vnode)) {\r\n        oldVnode.el.parentNode.replaceChild(el, oldVnode.el);\r\n        return el;\r\n    }\r\n    // 复用原来的节点标签\r\n    el = vnode.el = oldVnode.el;\r\n    // 文本没有标签\r\n    if (!oldVnode.tag) {\r\n        if (oldVnode.text !== vnode.text) {\r\n            // 用新的文本替换原来的\r\n            oldVnode.el.textContent = vnode.text;\r\n        }\r\n    }\r\n\r\n    // 如果是标签，对比标签的属性\r\n    patchProps(vnode.el, oldVnode.data, vnode.data);\r\n\r\n    const oldCh = oldVnode.children || [];\r\n    const ch = vnode.children || [];\r\n    if (oldCh.length > 0 && ch.length > 0) {\r\n        updateChildren(el, oldCh, ch);\r\n    } else if (ch.length > 0) {\r\n        for (const key in ch) {\r\n            if (Object.hasOwnProperty.call(ch, key)) {\r\n                const child = ch[key];\r\n                el.appendChild(createElm(child));\r\n            }\r\n        }\r\n    } else if (oldCh.length > 0) {\r\n        el.innerHTML = \"\";\r\n    }\r\n}\r\n\r\nfunction sameVnode(a, b) {\r\n    return a.tag === b.tag && a.key === b.key;\r\n}\r\n\r\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\r\n    let i, key;\r\n    const map = {};\r\n    for (i = beginIdx; i <= endIdx; ++i) {\r\n        key = children[i].key;\r\n        if (isDef(key)) map[key] = i;\r\n    }\r\n    return map;\r\n}\r\n\r\nfunction updateChildren(parentElm, oldCh, newCh) {\r\n    // 原来子节点集合的起始索引\r\n    let oldStartIdx = 0;\r\n    // 原来子节点集合的结束索引\r\n    let oldEndIdx = oldCh.length - 1;\r\n    // 原来子节点集合的起始元素\r\n    let oldStartVnode = oldCh[0];\r\n    // 原来子节点集合的末尾元素\r\n    let oldEndVnode = oldCh[oldEndIdx];\r\n\r\n    // 新子节点集合的起始索引\r\n    let newStartIdx = 0;\r\n    // 新子节点集合的结束索引\r\n    let newEndIdx = newCh.length - 1;\r\n    // 新子节点集合的起始元素\r\n    let newStartVnode = newCh[0];\r\n    // 新子节点集合的末尾元素\r\n    let newEndVnode = newCh[newEndIdx];\r\n    // 如果有一方起始指针等于结束指针的索引，就结束对比\r\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\r\n        if (isUndef(oldStartVnode)) {\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n        } else if (isUndef(oldEndVnode)) {\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n        } else if (sameVnode(oldStartVnode, newStartVnode)) {\r\n            //  如果当前的元素相同，就更新属性，然后再比较子元素\r\n            patchVnode(oldStartVnode, newStartVnode);\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n            newStartVnode = newCh[++newStartIdx];\r\n        } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n            patch(oldEndVnode, newEndVnode);\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n            newEndVnode = newCh[--newEndIdx];\r\n        } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n            patch(oldStartVnode, newEndVnode);\r\n            parentElm.insertBefore(\r\n                oldStartVnode.el,\r\n                oldEndVnode.el.nextSibling\r\n            );\r\n            oldStartVnode = oldCh[++oldStartIdx];\r\n            newEndVnode = newCh[--oldEndIdx];\r\n        } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n            patch(oldEndVnode, newStartVnode);\r\n            parentElm.insertBefore(oldEndVnode.el, oldStartVnode.el);\r\n            oldEndVnode = oldCh[--oldEndIdx];\r\n            newStartVnode = newCh[++newStartIdx];\r\n        } else {\r\n            let oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\r\n            let moveIndex = oldKeyToIdx[newStartVnode.key];\r\n            // 说明没有复用，不需要移动\r\n            if (isUndef(moveIndex)) {\r\n                parentElm.insertBefore(\r\n                    createElm(newStartVnode),\r\n                    oldStartVnode.el\r\n                );\r\n            } else {\r\n                let moveVnode = oldCh[oldKeyToIdx];\r\n                oldCh[oldKeyToIdx] = null;\r\n                parentElm.insertBefore(moveVnode.el, oldStartVnode.el);\r\n                patch(moveVnode, newStartVnode);\r\n            }\r\n            newStartVnode = newCh[++newStartIdx];\r\n        }\r\n    }\r\n    if (newStartIdx <= newEndIdx) {\r\n        for (let i = newStartIdx; i <= newEndIdx; i++) {\r\n            let ele =\r\n                newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].el;\r\n            parentElm.insertBefore(createElm(newCh[i]), ele);\r\n        }\r\n    }\r\n\r\n    if (oldStartIdx <= oldEndIdx) {\r\n        for (let i = oldStartIdx; i <= oldEndIdx; i++) {\r\n            let child = oldCh[i];\r\n            if (isDef(child)) {\r\n                parentElm.removeChild(child.el);\r\n            }\r\n        }\r\n    }\r\n}\r\n","import Watcher from \"../observer/watcher\";\r\nimport { patch } from \"../vdom/patch\";\r\n\r\nexport function lifecycleMixin(Vue) {\r\n    // 将vnode转换成真实dom\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this;\r\n        const el = vm.$el;\r\n\r\n        // patch既有初始化的功能，也有更新的功能\r\n        // 将patch生成的el重新赋值给$el\r\n        vm.$el = patch(el, vnode);\r\n    };\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n    // 挂载之前调用beforeMount\r\n    callHook(vm, \"beforeMount\");\r\n\r\n    vm.$el = el;\r\n    // 1.调用render方法产生虚拟节点\r\n    // 2.根据虚拟dom产生真实dom\r\n    // 3.将真实dom插入到el中\r\n    // vm._update(vm._render());\r\n\r\n    // 渲染和更新时调用的方法\r\n    const updateComponent = () => {\r\n        vm._update(vm._render());\r\n    };\r\n\r\n    // isRenderWatcher参数为true，代表是一个渲染watcher\r\n    new Watcher(vm, updateComponent, () => {}, {}, true);\r\n\r\n    // 挂载后调用mounted\r\n    callHook(vm, \"mounted\");\r\n}\r\n\r\nexport function callHook(vm, hook) {\r\n    const handlers = vm.$options[hook];\r\n    if (handlers) {\r\n        for (let i = 0, j = handlers.length; i < j; i++) {\r\n            handlers[i].call(vm);\r\n        }\r\n    }\r\n}\r\n","// 数组原来原型上的方法\r\nlet oldArrayProtoMethods = Array.prototype;\r\n\r\n// 继承方法\r\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\r\n\r\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\r\n\r\n// 如果存在重写的方法，就调用重写的，如果没有，就调用原来的\r\nmethods.forEach((method) => {\r\n    arrayMethods[method] = function (...args) {\r\n        // const result = oldArrayProtoMethods[method].apply(this, args);\r\n        const result = oldArrayProtoMethods[method].call(this, ...args);\r\n\r\n        // 对新增的数据需要再次劫持\r\n\r\n        let insert = null;\r\n        let ob = this.__ob__;\r\n        // 数组中新添加的项有可能也是对象\r\n        switch (method) {\r\n            // 这两个都是追加，追加的内容可能是数组\r\n            case \"push\":\r\n            case \"unshift\":\r\n                insert = args;\r\n                break;\r\n\r\n            case \"splice\": \r\n                // splice添加时，第二个参数是新增的内容\r\n                insert = args.slice(2);\r\n            default:\r\n                break;\r\n        } \r\n        // 给数组新增的值也要观测\r\n        if (insert) ob.observeArray(insert);\r\n        ob.dep.notify();\r\n        return result;\r\n    };\r\n});\r\n","import { isArray, isObject } from \"../shared/util\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer {\r\n    constructor(data) {\r\n        // 相当于给对象或数组加了dep\r\n        this.dep = new Dep();\r\n        // define.prototype只能劫持已经存在的属性，新增的和删除的无法劫持，vue中会单独增加一些api，解决这个问题，比如，$set，$delete\r\n        // 数组的更改索引和长度,无法被监控\r\n\r\n        // 判断一个对象是否被观测过\r\n        // 不能直接写value.__ob__ = this; 会产生死循环\r\n\r\n        // 把Observer的实例放到data的属性上\r\n\r\n        // 给数据加了一个标识，同时在外面能够获取到observeArray方法\r\n        Object.defineProperty(data, \"__ob__\", {\r\n            enumerable: false, // 不能被枚举，不能被循环出来，避免死循环\r\n            configurable: false,\r\n            value: this,\r\n        });\r\n\r\n        // 使用define.prototype重新定义属性\r\n        if (Array.isArray(data)) {\r\n            // 劫持数组push，unshift等改变原有数组的方法\r\n            // 同时还要避免原来原型上的方法被覆盖，也就是说只有部分方法被重写\r\n            data.__proto__ = arrayMethods;\r\n\r\n            // 如果数组中存在对象，变化也要监测\r\n            // 数组中普通类型值是不做劫持的\r\n            this.observeArray(data);\r\n        } else {\r\n            this.observeObject(data);\r\n        }\r\n    }\r\n    observeArray(data) {\r\n        data.forEach((item) => observer(item));\r\n    }\r\n    // 循环对象，属性依次劫持\r\n\r\n    observeObject(data) {\r\n        let keys = Object.keys(data);\r\n        keys.forEach((key) => {\r\n            defineReactive(data, key, data[key]);\r\n        });\r\n    }\r\n}\r\nexport function defineReactive(data, key, value) {\r\n    // 如果value是对象，继续observer\r\n    // 递归，层次越深，性能越低\r\n    let childOb = observer(value);\r\n\r\n    // 给每个属性都添加一个dep\r\n    let dep = new Dep();\r\n\r\n    // 这是一个闭包的形式，get和set都可以获取value，value不销毁\r\n    Object.defineProperty(data, key, {\r\n        // 取值时依赖收集\r\n        get() {\r\n            // 让dep记住当前的watcher\r\n            if (Dep.target) {\r\n                // 属性收集器，记住当前的watcher\r\n                dep.depend();\r\n\r\n                if (childOb) {\r\n                    childOb.dep.depend();\r\n                    if (isArray(value)) {\r\n                        dependArray(value);\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n        // 修改时依赖更新\r\n        set(newValue) {\r\n            if (newValue === value) return;\r\n\r\n            // 新设置的值可能也是对象,所以需要继续监测\r\n            observer(newValue);\r\n            value = newValue;\r\n            dep.notify();\r\n        },\r\n    });\r\n}\r\n\r\nexport function observer(data) {\r\n    if (!isObject(data)) {\r\n        return;\r\n    }\r\n    // 如果被劫持过，就不需要在劫持了，所以需要判断这个对象是否被劫持过，可以添加一个实例\r\n    if (data.__ob__) {\r\n        return data;\r\n    }\r\n    return new Observer(data);\r\n}\r\n\r\nfunction dependArray(value) {\r\n    for (let e, i = 0, l = value.length; i < l; i++) {\r\n        e = value[i];\r\n        if (e && e.__ob__) {\r\n            e.__ob__.dep.depend();\r\n        }\r\n        if (isArray(e)) {\r\n            dependArray(e);\r\n        }\r\n    }\r\n}\r\n","import Dep from \"../observer/dep\";\r\nimport { observer } from \"../observer/index\";\r\nimport Watcher from \"../observer/watcher\";\r\nimport { isArray, isFunction, isPlainObject, noop } from \"../shared/util\";\r\n\r\nconst sharedPropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: noop,\r\n    set: noop,\r\n};\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options;\r\n    // 数据劫持\r\n    if (opts.data) {\r\n        initData(vm);\r\n    }\r\n    if (opts.watch) {\r\n        initWatch(vm, opts.watch);\r\n    }\r\n\r\n    if (opts.computed) {\r\n        initComputed(vm, opts.computed);\r\n    }\r\n}\r\n// 设置一个数据代理,取值和设置值的时候直接操作vm._data\r\nfunction proxy(vm, target, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[target][key];\r\n        },\r\n        set(newValue) {\r\n            vm[target][key] = newValue;\r\n        },\r\n    });\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n\r\n    // 将data方到实例vm上\r\n    vm._data = data = isFunction(data) ? data.call(vm) : data || {};\r\n    if (!isPlainObject(data)) {\r\n        data = {};\r\n        console.error(\"[Vue warn] data functions should return an object\");\r\n    }\r\n\r\n    observer(data);\r\n    // 将vm._data用vm代理\r\n    for (const key in data) {\r\n        proxy(vm, \"_data\", key);\r\n    }\r\n\r\n\r\n    \r\n}\r\n\r\nfunction initWatch(vm, watch) {\r\n    // 拿到watch后，循环watch\r\n    for (const key in watch) {\r\n        // 拿到watcher对应的方法 可能是string | Function | Object | Array\r\n        const handler = watch[key];\r\n        if (isArray(handler)) {\r\n            // 如果是数组，循环数组\r\n            for (let i = 0; i < handler.length; i++) {\r\n                createWatcher(vm, key, handler[i]);\r\n            }\r\n        } else {\r\n            // 其他情况\r\n            createWatcher(vm, key, handler);\r\n        }\r\n    }\r\n}\r\n\r\n// 第二个参数可能是key或者一个函数\r\n// 在使用vm.$watch()这种方式时，传给vm.$watch()的是一个函数，此时的参数是会获取这个函数的返回结果\r\nfunction createWatcher(vm, expOrFn, handler, options) {\r\n    // handler 可能是string | Function | Object\r\n    // options用来添加标识\r\n    if (isPlainObject(handler)) {\r\n        // 如果是对象，将对象中的handler取出来\r\n        // 然后将其他选项放入options，例如deep：true，immediate：true等选项\r\n        options = handler;\r\n        handler = handler.handler;\r\n    }\r\n    if (typeof handler === \"string\") {\r\n        // 去当前实例上将方法取出来,赋给handler\r\n        handler = vm[handler];\r\n    }\r\n    // 最终调用的是vm.$watch\r\n    return vm.$watch(expOrFn, handler, options);\r\n}\r\n\r\nconst computedWatcherOptions = { lazy: true };\r\n\r\nfunction initComputed(vm, computed) {\r\n    // 将计算属性watcher保存到vm上\r\n    const watchers = (vm._computedWatchers = Object.create(null));\r\n\r\n    for (const key in computed) {\r\n        const userDef = computed[key];\r\n        const getter = isFunction(userDef) ? userDef : userDef.get;\r\n\r\n        // 将属性和watcher对应起来\r\n        watchers[key] = new Watcher(\r\n            vm,\r\n            getter || noop,\r\n            noop,\r\n            computedWatcherOptions\r\n        );\r\n\r\n        defineComputed(vm, key, userDef);\r\n    }\r\n}\r\n\r\nfunction defineComputed(target, key, userDef) {\r\n    if (isFunction(userDef)) {\r\n        sharedPropertyDefinition.get = createComputedGetter(key);\r\n        sharedPropertyDefinition.set = noop;\r\n    } else {\r\n        sharedPropertyDefinition.get = userDef.get\r\n            ? createComputedGetter(key)\r\n            : noop;\r\n\r\n        sharedPropertyDefinition.set = userDef.set || noop;\r\n    }\r\n\r\n    if (sharedPropertyDefinition.set === noop) {\r\n        sharedPropertyDefinition.set = function () {\r\n            console.error(\r\n                `Computed property \"${key}\" was assigned to but it has no setter.`\r\n            );\r\n        };\r\n    }\r\n\r\n    Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\r\n\r\n// 检测是否执行这个getter\r\nfunction createComputedGetter(key) {\r\n    return function computedGetter() {\r\n        // 获取到对应属性的watcher\r\n        const watcher = this._computedWatchers && this._computedWatchers[key];\r\n        if (watcher) {\r\n            if (watcher.dirty) {\r\n                // 此时watcher栈中有两个watcher\r\n                watcher.evaluate();\r\n            }\r\n\r\n            if (Dep.target) {\r\n                watcher.depend();\r\n            }\r\n\r\n            // 将值返回\r\n            return watcher.value;\r\n        }\r\n    };\r\n}\r\n\r\nexport function stateMixin(Vue) {\r\n    // watch的核心是new Watcher\r\n    Vue.prototype.$watch = function (expOrFn, cb, options) {\r\n        const vm = this;\r\n        // 标识是一个用户watcher\r\n        options = options || {};\r\n        new Watcher(vm, expOrFn, cb, options);\r\n        // 如果是immediate就立即执行操作函数\r\n        if (options.immediate) {\r\n            cb.call(vm);\r\n        }\r\n    };\r\n}\r\n","import { compilerToFunctions } from \"../compiler\";\r\nimport { mergeOptions } from \"../util/options\";\r\nimport { callHook, mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        // 需要将用户自定义的options和全局的options合并\r\n        vm.$options = mergeOptions(vm.constructor.options, options);\r\n\r\n        // 初始化之前调用beforeCreate\r\n        callHook(vm, \"beforeCreate\");\r\n        \r\n        // 初始化状态     \r\n        initState(vm);\r\n        \r\n        callHook(vm, \"created\");\r\n\r\n        // 如果当前有el属性，说明要进行模板渲染\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    };\r\n    // 挂载操作\r\n    Vue.prototype.$mount = function (el) {\r\n        // 查找dom元素\r\n        const vm = this;\r\n        const opts = vm.$options;\r\n        el = document.querySelector(el);\r\n\r\n        // 没有render，将template转换成render\r\n        if (!opts.render) {\r\n            // 根据生命周期图示，有el，有template才会进行编译的操作，把模板编译成render函数\r\n            let template = opts.template;\r\n            if (!template && el) {\r\n                // 获取整个app的div，包括外层元素\r\n                template = el.outerHTML;\r\n            }\r\n            // 将模板编译成render\r\n            const render = compilerToFunctions(template);\r\n            opts.render = render;\r\n        }\r\n\r\n        // 挂载组件，将实例挂载到el上\r\n        mountComponent(vm, el);\r\n    };\r\n}\r\n\r\n","import { nextTick } from \"../util/next-tick\";\r\n\r\nexport function renderMixin(Vue) {\r\n    // 这几种方法都是用对象描述dom的结构\r\n\r\n    // 创建元素\r\n    // 参数是：标签，属性，子元素\r\n    Vue.prototype._c = function () {\r\n        return createElementVNode(...arguments);\r\n    };\r\n    // 创建文本元素\r\n    Vue.prototype._v = function (text) {\r\n        return creteTextVNode(text);\r\n    };\r\n    // stringify\r\n    Vue.prototype._s = function (val) {\r\n        return val === null\r\n            ? \"\"\r\n            : typeof val === \"object\"\r\n            ? JSON.stringify(val)\r\n            : val;\r\n    };\r\n    Vue.prototype.$nextTick = function (fn) {\r\n        return nextTick(fn, this);\r\n    };\r\n\r\n    Vue.prototype._render = function () {\r\n        const vm = this;\r\n        const render = vm.$options.render;\r\n        // 调用render，返回的结果是vnode\r\n        let vnode = render.call(vm);\r\n        return vnode;\r\n    };\r\n}\r\n\r\nfunction createElementVNode(tag, data, ...children) {\r\n    if (data == null) data = {};\r\n    return vnode(tag, data, data.key, children);\r\n}\r\n\r\nfunction creteTextVNode(text) {\r\n    return vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n// 创建虚拟dom\r\n// 虚拟节点可以自定义属性,ast一定是根据源代码来转换\r\nfunction vnode(tag, data, key, children, text) {\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text,\r\n    };\r\n}\r\n","import { initGlobalAPI } from \"./global-api\";\r\nimport { initMixin } from \"./instance/init\";\r\nimport { lifecycleMixin } from \"./instance/lifecycle\";\r\nimport { stateMixin } from \"./instance/state\";\r\nimport { renderMixin } from \"./vdom\";\r\n\r\n// options：用户传入的选项\r\nfunction Vue(options) {\r\n  this._init(options);\r\n}\r\n\r\n/* 原型方法 */\r\n\r\ninitMixin(Vue); // 扩展了init方法\r\n\r\nstateMixin(Vue);\r\n\r\n// 混合生命周期渲染\r\nlifecycleMixin(Vue);\r\n// render\r\nrenderMixin(Vue);\r\n\r\n/* 静态方法 */\r\ninitGlobalAPI(Vue);\r\n\r\n// 导出\r\nexport default Vue;\r\n"],"names":["isFunction","value","_toString","Object","prototype","toString","isPlainObject","obj","call","isObject","hasOwn","key","hasOwnProperty","isArray","Array","isNative","Ctor","test","parsePath","path","segments","split","i","length","noop","a","b","c","isUndef","v","undefined","isDef","callbacks","pending","timerFunc","Promise","p","resolve","then","flushCallbacks","MutationObserver","counter","observer","textNode","document","createTextNode","String","observe","characterData","data","setImmediate","setTimeout","copies","slice","nextTick","cb","ctx","push","LIFECYCLE_HOOKS","strats","create","forEach","hook","mergeLifecycleHook","defaultStrat","parentVal","childVal","res","concat","dedupeHooks","hooks","indexOf","mergeOptions","parent","child","options","mergeField","strat","initMixin","Vue","mixin","initGlobalAPI","defaultTagRE","parseText","text","JSON","stringify","tokens","lastIndex","match","index","exec","trim","join","genProps","ast","attrs","str","at","name","item","genChildren","children","map","genNode","node","type","genElement","props","code","tag","generate","render","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","textEnd","startTagMatch","parseStartTag","handleStartTag","endTagMatch","handleEndTag","advance","substring","charts","n","start","tagName","end","attr","createASTElement","element","pop","compilerToFunctions","template","Function","uid","Dep","id","subs","sub","target","addDep","watcher","update","targetStack","pushTarget","popTarget","has","queue","flushSchedulerQueue","flushQueue","q","run","queueWatcher","seenObjects","Set","traverse","val","_traverse","clear","seen","keys","isA","__ob__","depId","dep","add","Watcher","vm","expOrFn","isRenderWatcher","_watcher","deep","user","lazy","dirty","deps","depIds","getter","get","addSub","oldValue","depend","patch","oldVnode","vnode","createElm","isRealElement","nodeType","el","parentNode","newEle","insertBefore","nextSibling","removeChild","patchVnode","createElement","patchProps","appendChild","oldProps","oldStyle","style","newStyle","removeAttribute","styleName","className","setAttribute","sameVnode","replaceChild","textContent","oldCh","ch","updateChildren","innerHTML","createKeyToOldIdx","beginIdx","endIdx","parentElm","newCh","oldStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newStartIdx","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","moveIndex","moveVnode","ele","lifecycleMixin","_update","$el","mountComponent","callHook","updateComponent","_render","handlers","$options","j","oldArrayProtoMethods","arrayMethods","methods","method","args","result","insert","ob","observeArray","notify","Observer","defineProperty","enumerable","configurable","__proto__","observeObject","defineReactive","childOb","dependArray","set","newValue","e","l","sharedPropertyDefinition","initState","opts","initData","watch","initWatch","computed","initComputed","proxy","_data","console","error","handler","createWatcher","$watch","computedWatcherOptions","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","evaluate","stateMixin","immediate","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","createElementVNode","arguments","_v","creteTextVNode","_s","$nextTick","fn"],"mappings":"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"}