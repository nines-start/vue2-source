{"version":3,"file":"vue.js","sources":["../src/compiler/parse/text-parse.js","../src/compiler/codeGen/index.js","../src/compiler/parse/html-parse.js","../src/compiler/index.js","../src/shared/until.js","../src/observer/dep.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/instance/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/instance/state.js","../src/instance/init.js","../src/vdom/index.js","../src/index.js"],"sourcesContent":["// 匹配{{}}\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\r\n\r\n// 匹配文本标签\r\nexport function parseText(text) {\r\n    if (!defaultTagRE.test(text)) {\r\n        return `_v(${JSON.stringify(text)})`;\r\n    }\r\n\r\n    let tokens = [];\r\n\r\n    let lastIndex = (defaultTagRE.lastIndex = 0);\r\n    // 匹配到的结果\r\n    let match;\r\n    // 保存匹配到的索引\r\n    let index;\r\n\r\n    while ((match = defaultTagRE.exec(text))) {\r\n\r\n        index = match.index;\r\n        if (index > lastIndex) {\r\n            tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`);\r\n        // 当前索引加上匹配字符串的长度\r\n        lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return tokens.join(\"+\");\r\n}","import { parseText } from \"../parse/text-parse\";\r\n\r\n// 处理属性\r\nfunction genProps(ast) {\r\n    const { attrs } = ast;\r\n\r\n    let str = \"\";\r\n    // 遍历attrs\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        const at = attrs[i];\r\n        // style属性需要单独处理\r\n        // 样式  style=\"background-color: red\" 需要把冒号转成对象\r\n        if (at.name === \"style\") {\r\n            let obj = {};\r\n            // 先用分号分隔，再用冒号分隔\r\n            at.value.split(\";\").forEach((item) => {\r\n                let [key, value] = item.split(\":\");\r\n                obj[key] = value;\r\n            });\r\n            at.value = obj;\r\n        }\r\n        // 其他情况可以直接拼接\r\n        // 多个属性之间需要使用逗号\r\n        str += `${at.name}:${JSON.stringify(at.value)},`;\r\n    }\r\n    // 删除最后一个，\r\n    return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction genChildren(ast) {\r\n    // 判断是否有子元素\r\n    const { children } = ast;\r\n    // 需要把子元素拼接在一起，用逗号拼接起来\r\n    if (children) {\r\n        return children.map((child) => genNode(child)).join(\",\");\r\n    }\r\n}\r\nfunction genNode(node) {\r\n    // 节点可能有两种类型，一种是文本，一种是标签\r\n    if (node.type === 1) {\r\n        return genElement(node);\r\n    } else {\r\n        let { text } = node;\r\n        return `_v(${parseText(text)})`;\r\n    }\r\n}\r\n\r\nfunction genElement(ast) {\r\n    let props = genProps(ast);\r\n    let children = genChildren(ast);\r\n\r\n    let code = `_c('${ast.tag}',\r\n    ${ast.attrs.length > 0 ? `${props}` : \"null\"}${\r\n        children ? `,${children}` : \"\"\r\n    })`;\r\n    return code;\r\n}\r\n\r\nexport function generate(ast) {\r\n    const code = ast ? genElement(ast) : '_c(\"div\")';\r\n    // 使用with的作用，去this上取值\r\n    return {\r\n        render: `with(this){return ${code}}`,\r\n    };\r\n}\r\n","\r\nconst attribute =\r\n    /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n\r\nconst dynamicArgAttribute =\r\n    /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\n\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\n\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\n\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\n\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\n\r\nexport function parseHTML(html) {\r\n    // 树根\r\n    let root;\r\n\r\n    let currentParent;\r\n\r\n    // 栈结构\r\n    let stack = [];\r\n\r\n    const ELEMENT_TYPE = 1;\r\n    const TEXT_TYPE = 3;\r\n\r\n    // 只要html不为空，就一直循环解析\r\n    while (html) {\r\n        let textEnd = html.indexOf(\"<\");\r\n        // 等于0 ，是标签\r\n        if (textEnd === 0) {\r\n            const startTagMatch = parseStartTag();\r\n            // 开始标签\r\n            if (startTagMatch) {\r\n                handleStartTag(startTagMatch);\r\n                continue;\r\n            }\r\n            // 结束标签\r\n            const endTagMatch = html.match(endTag);\r\n            if (endTagMatch) {\r\n                handleEndTag(endTagMatch[1]);\r\n                advance(endTagMatch[0].length);\r\n            }\r\n        }\r\n\r\n        // 是文本\r\n        let text;\r\n        if (textEnd > 0) {\r\n            text = html.substring(0, textEnd);\r\n        }\r\n        if (text) {\r\n            charts(text);\r\n            advance(text.length);\r\n        }\r\n    }\r\n\r\n    // 将字符串进行截取操作， 然后替换html\r\n    function advance(n) {\r\n        html = html.substring(n);\r\n    }\r\n\r\n    // 匹配开始标签\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);\r\n        if (start) {\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: [],\r\n            };\r\n            // 获取标签后删除\r\n            advance(start[0].length);\r\n            let end, attr;\r\n\r\n            // 不是开始标签的结束，并且是属性就一直匹配\r\n            while (\r\n                !(end = html.match(startTagClose)) &&\r\n                (attr = html.match(attribute))\r\n            ) {\r\n                // 使用双引号，属性值是第3项，使用单引号，是第四项， 不用引号是是第五项\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5],\r\n                });\r\n                // 获取属性后删除\r\n                advance(attr[0].length);\r\n            }\r\n            if (end) {\r\n                advance(end[0].length);\r\n                return match;\r\n            }\r\n        }\r\n    }\r\n    // 创建ast语法树\r\n    function createASTElement(tagName, attrs) {\r\n        return {\r\n            // 标签名\r\n            tag: tagName,\r\n            // 标签type是1\r\n            type: ELEMENT_TYPE,\r\n            // 子节点\r\n            children: [],\r\n            // 属性\r\n            attrs,\r\n            // 父节点\r\n            parent: null,\r\n        };\r\n    }\r\n\r\n    // 处理开始标签\r\n    function handleStartTag(match) {\r\n        const { tagName, attrs } = match;\r\n        const element = createASTElement(tagName, attrs);\r\n\r\n        // 第一次调用的是树根\r\n        if (!root) {\r\n            root = element;\r\n        }\r\n        // 当前解析的标签保存为父标签\r\n        currentParent = element;\r\n\r\n        // 将开始标签元素放入栈中\r\n        stack.push(element);\r\n    }\r\n\r\n    // 处理结束标签，在结尾标签闭合时，可以创建父子关系\r\n    function handleEndTag(tagName) {\r\n        // 取出栈中最后一个标签\r\n        const element = stack.pop();\r\n        // 当前父元素也要变成前一个元素\r\n        currentParent = stack[stack.length - 1];\r\n\r\n        // 元素闭合时，可以知道这个标签的父亲是谁\r\n        // 同时也知道这个父亲的子元素\r\n        // 双向检测\r\n        if (currentParent) {\r\n            element.parent = currentParent;\r\n            currentParent.children.push(element);\r\n        }\r\n    }\r\n\r\n    function charts(text) {\r\n        text = text.trim();\r\n        if (text) {\r\n            currentParent.children.push({\r\n                // 文本类型是3\r\n                type: TEXT_TYPE,\r\n                text,\r\n            });\r\n        }\r\n    }\r\n\r\n    return root;\r\n}\r\n","import { generate } from \"./codeGen\";\r\nimport { parseHTML } from \"./parse/html-parse\";\r\n\r\nexport function compilerToFunctions(template) {\r\n    const ast = parseHTML(template);\r\n    const code = generate(ast);\r\n\r\n    let render = new Function(code.render);\r\n    return render;\r\n}\r\n","export function isFunction(value) {\r\n    return typeof value === \"function\";\r\n}\r\n\r\nconst _toString = Object.prototype.toString;\r\nexport function isPlainObject(obj) {\r\n    return _toString.call(obj) === \"[object Object]\";\r\n}\r\n\r\nexport function isObject(obj) {\r\n    return obj !== null && typeof obj === \"object\";\r\n}\r\n","let uid = 0;\r\n\r\nclass Dep {\r\n    constructor() {\r\n        this.id = uid++;\r\n        // 存放当前属性对应的watcher\r\n        this.subs = [];\r\n    }\r\n    addSub(sub) {\r\n        this.subs.push(sub);\r\n    }\r\n    depend() {\r\n        // 希望让当前的target也能记住dep\r\n        Dep.target.addDep(this);\r\n    }\r\n    notify() {\r\n        this.subs.forEach((watcher) => watcher.update());\r\n    }\r\n}\r\n\r\n// 添加一个全局变量,，保存当前的watcher\r\nDep.target = null;\r\nexport function pushTarget(watcher) {\r\n    Dep.target = watcher;\r\n}\r\nexport function popTarget() {\r\n    Dep.target = null;\r\n}\r\nexport default Dep;\r\n","import { isFunction } from \"../shared/until\";\r\nimport Dep, { popTarget, pushTarget } from \"./dep\";\r\n\r\n// 每个watcher都添加一个唯一值\r\nlet uid = 0;\r\n\r\nclass Watcher {\r\n    constructor(vm, expOrFn, cb, options, isRenderWatcher) {\r\n        this.id = ++uid;\r\n        this.vm = vm;\r\n        this.cb = cb;\r\n        if (isFunction(expOrFn)) {\r\n            this.getter = expOrFn;\r\n        }\r\n        this.deps = [];\r\n        this.depIds = new Set();\r\n\r\n        this.get();\r\n    }\r\n\r\n    get() {\r\n        // 将当前的watcher放到全局变量上\r\n        // this是当前watcher实例\r\n        pushTarget(this);\r\n\r\n        // 首先调用一次，让页面渲染\r\n        this.getter();\r\n\r\n        // 视图渲染完成后，清空这个值\r\n        popTarget();\r\n    }\r\n    // 让watcher记住dep\r\n    addDep(dep) {\r\n        const id = dep.id;\r\n        // 去重\r\n        if (!this.depIds.has(id)) {\r\n            this.deps.push(dep);\r\n            this.depIds.add(id);\r\n            dep.addSub(this);\r\n        }\r\n    }\r\n    update() {\r\n        this.get();\r\n    }\r\n}\r\n\r\nexport default Watcher;\r\n","export function patch(oldVNode, vnode) {\r\n    // patch既有初始化的功能，也有更新的功能\r\n    const isRealElement = oldVNode.nodeType;\r\n    if (isRealElement) {\r\n        const el = oldVNode;\r\n        // 获取父元素\r\n        const parent = el.parentNode;\r\n\r\n        // 根据虚拟节点创建真实dom\r\n        let newEle = createElm(vnode);\r\n     \r\n        // 将新的dom插入到原来的节点后面,然后再把原来的删除\r\n        parent.insertBefore(newEle, el.nextSibling);\r\n        parent.removeChild(el);\r\n\r\n        return newEle;\r\n    } else {\r\n        // 执行diff算法更新\r\n    }\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    let { tag, data, children, text } = vnode;\r\n    if (typeof tag === \"string\") {\r\n        // 标签\r\n        vnode.el = document.createElement(tag);\r\n\r\n        patchProps(vnode.el, data);\r\n\r\n        children.forEach((element) => {\r\n            // 子元素\r\n            vnode.el.appendChild(createElm(element));\r\n        });\r\n    } else {\r\n        // 文本\r\n        vnode.el = document.createTextNode(text);\r\n    }\r\n\r\n    return vnode.el;\r\n}\r\nfunction patchProps(el, props) {\r\n    for (const key in props) {\r\n        if (key === \"style\") {\r\n             for (let styleName in props.style) {\r\n                el.style[styleName] = props.style[styleName];\r\n            }\r\n        } else {\r\n            el.setAttribute(key, props[key]);\r\n        }\r\n    }\r\n}\r\n","import Watcher from \"../observer/watcher\";\r\nimport { patch } from \"../vdom/patch\";\r\n\r\nexport function lifecycleMixin(Vue) {\r\n    // 将vnode转换成真实dom\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this;\r\n        const el = vm.$el;\r\n\r\n        // 将patch生成的el重新赋值给$el\r\n        vm.$el = patch(el, vnode);\r\n    };\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n    vm.$el = el;\r\n\r\n    const updateComponent = () => {\r\n        vm._update(vm._render());\r\n    };\r\n\r\n    new Watcher(vm, updateComponent, () => {}, {}, true);\r\n    vm._update(vm._render());\r\n}\r\n","// 数组原来原型上的方法\r\nlet oldArrayProtoMethods = Array.prototype;\r\n\r\n// 继承一下方法\r\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\r\n\r\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\r\n\r\nmethods.forEach((method) => {\r\n    arrayMethods[method] = function (...args) {\r\n        const result = oldArrayProtoMethods[method].call(this, ...args);\r\n\r\n        // 对新增的数据需要再次劫持\r\n        let insert = null;\r\n        let ob = this.__ob__;\r\n        // 数组中新添加的项有可能也是对象\r\n        switch (method) {\r\n            // 这两个方法都是追加，追加的内容可能是数组\r\n            case \"push\":\r\n            case \"unshift\":\r\n                insert = args;\r\n                break;\r\n\r\n            case \"splice\":\r\n                // splice添加时，第二个参数是新增的内容\r\n                insert = args.slice(2);\r\n            default:\r\n                break;\r\n        }\r\n        // 给数组新增的值也要劫持\r\n        if (insert) ob.observeArray(insert);\r\n        return result;\r\n    };\r\n});\r\n","import { isObject } from \"../shared/until\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\nclass Observer {\r\n    constructor(data) {\r\n        Object.defineProperty(data, \"__ob__\", {\r\n            enumerable: false,\r\n            configurable: false,\r\n            value: this,\r\n        });\r\n\r\n        // 使用define.prototype重新定义属性\r\n        if (Array.isArray(data)) {\r\n            data.__proto__ = arrayMethods;\r\n            this.observeArray(data);\r\n        } else {\r\n            this.observeObject(data);\r\n        }\r\n    }\r\n    observeArray(data) {\r\n        data.forEach((item) => observer(item));\r\n    }\r\n\r\n    observeObject(data) {\r\n        let keys = Object.keys(data);\r\n        keys.forEach((key) => {\r\n            defineReactive(data, key, data[key]);\r\n        });\r\n    }\r\n}\r\nexport function defineReactive(data, key, value) {\r\n    observer(value);\r\n\r\n    // 给每个属性都添加一个dep\r\n    let dep = new Dep();\r\n\r\n    // 这是一个闭包的形式，get和set都可以获取value，value不销毁\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            // 让dep记住当前的watcher\r\n            if (Dep.target) {\r\n                // 属性收集器，记住当前的watcher\r\n                dep.depend();\r\n            }\r\n\r\n            return value;\r\n        },\r\n        set(newValue) {\r\n            if (newValue === value) return;\r\n\r\n            // 新设置的值可能也是对象,所以需要继续劫持\r\n            observer(newValue);\r\n            value = newValue;\r\n\r\n            dep.notify();\r\n        },\r\n    });\r\n}\r\n\r\nexport function observer(data) {\r\n    if (!isObject(data)) {\r\n        return;\r\n    }\r\n    if (data.__ob__) {\r\n        return data;\r\n    }\r\n    return new Observer(data);\r\n}\r\n","import { observer } from \"../observer/index\";\r\nimport { isFunction, isPlainObject } from \"../shared/until\";\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options;\r\n    if (opts.data) {\r\n        initData(vm);\r\n    }\r\n}\r\n// 设置一个数据代理,取值和设置值的时候直接操作vm._data\r\nfunction proxy(vm, target, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[target][key];\r\n        },\r\n        set(newValue) {\r\n            vm[target][key] = newValue;\r\n        },\r\n    });\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n\r\n    // 将data放到实例vm上\r\n    vm._data = data = isFunction(data) ? data.call(vm) : data || {};\r\n    if (!isPlainObject(data)) {\r\n        data = {};\r\n        console.error(\"[Vue warn] data functions should return an object\");\r\n    }\r\n\r\n    observer(data);\r\n    // 将vm._data用vm代理\r\n    for (const key in data) {\r\n        proxy(vm, \"_data\", key);\r\n    }\r\n}\r\n","import { compilerToFunctions } from \"../compiler\";\r\nimport { mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options;\r\n        initState(vm);\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    };\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this;\r\n        const opts = vm.$options;\r\n        el = document.querySelector(el);\r\n\r\n        // 没有rencer，将template转换成render\r\n        if (!opts.render) {\r\n            let template = opts.template;\r\n            if (!template && el) {\r\n                template = el.outerHTML;\r\n            }\r\n            const render = compilerToFunctions(template);\r\n            opts.render = render;\r\n        }\r\n\r\n        // 挂载组件，将实例挂载到el上\r\n        mountComponent(vm, el);\r\n    };\r\n}","export function renderMixin(Vue) {\r\n    // 创建元素\r\n    Vue.prototype._c = function () {\r\n        return createElementVNode(...arguments);\r\n    };\r\n    // 创建文本元素\r\n    Vue.prototype._v = function (text) {\r\n        return creteTextVNode(text);\r\n    };\r\n    // stringify\r\n    Vue.prototype._s = function (val) {\r\n        return val === null\r\n            ? \"\"\r\n            : typeof val === \"object\"\r\n            ? JSON.stringify(val)\r\n            : val;\r\n    };\r\n\r\n    Vue.prototype._render = function () {\r\n        const vm = this;\r\n        const render = vm.$options.render;\r\n        // 调用render，返回的结果是vnode\r\n        let vnode = render.call(vm);\r\n        return vnode;\r\n    };\r\n}\r\n\r\nfunction createElementVNode(tag, data, ...children) {\r\n    if (data == null) data = {};\r\n    return vnode(tag, data, data.key, children);\r\n}\r\n\r\nfunction creteTextVNode(text) {\r\n    return vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n// 创建虚拟dom\r\nfunction vnode(tag, data, key, children, text) {\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text,\r\n    };\r\n}\r\n","import { initMixin } from \"./instance/init\";\r\nimport { lifecycleMixin } from \"./instance/lifecycle\";\r\nimport { renderMixin } from \"./vdom\";\r\n\r\n// options：用户传入的选项\r\nfunction Vue(options) {\r\n    this._init(options);\r\n}\r\n\r\n// 将initMixin引入，并将Vue传过去，相当于扩展了init方法\r\ninitMixin(Vue);\r\n\r\n// 混合生命周期 渲染\r\nlifecycleMixin(Vue);\r\n// render \r\nrenderMixin(Vue);\r\n\r\n// 导出\r\nexport default Vue;\r\n"],"names":["defaultTagRE","parseText","text","test","JSON","stringify","tokens","lastIndex","match","index","exec","push","slice","trim","length","join","genProps","ast","attrs","str","i","at","name","obj","value","split","forEach","item","key","genChildren","children","map","child","genNode","node","type","genElement","props","code","tag","generate","render","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","textEnd","indexOf","startTagMatch","parseStartTag","handleStartTag","endTagMatch","handleEndTag","advance","substring","charts","n","start","tagName","end","attr","createASTElement","parent","element","pop","compilerToFunctions","template","Function","isFunction","_toString","Object","prototype","toString","isPlainObject","call","isObject","uid","Dep","id","subs","sub","target","addDep","watcher","update","pushTarget","popTarget","Watcher","vm","expOrFn","cb","options","isRenderWatcher","getter","deps","depIds","Set","get","dep","has","add","addSub","patch","oldVNode","vnode","isRealElement","nodeType","el","parentNode","newEle","createElm","insertBefore","nextSibling","removeChild","data","document","createElement","patchProps","appendChild","createTextNode","styleName","style","setAttribute","lifecycleMixin","Vue","_update","$el","mountComponent","updateComponent","_render","oldArrayProtoMethods","Array","arrayMethods","create","methods","method","args","result","insert","ob","__ob__","observeArray","Observer","defineProperty","enumerable","configurable","isArray","__proto__","observeObject","observer","keys","defineReactive","depend","set","newValue","notify","initState","opts","$options","initData","proxy","_data","console","error","initMixin","_init","$mount","querySelector","outerHTML","renderMixin","_c","createElementVNode","arguments","_v","creteTextVNode","_s","val","undefined"],"mappings":"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"}